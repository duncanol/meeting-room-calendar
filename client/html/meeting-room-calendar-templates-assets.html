<template name="assetlist">
  
  <th>
    {{#if addingAsset}}
      <input type="text" id="add-asset-textfield" placeholder="Enter an asset name" size="40"/>
    {{else}}
      <button id="add-asset-button" class="btn">+</button>
    {{/if}}
  </th>    

  {{#each assets}}
    <th>
      {{#if editingAsset _id}}
        <input type="text" id="edit-asset-textfield" value="{{name}}" data-asset-id="{{_id}}" 
               placeholder="Edit the asset name" size="40"/>
        <button class="remove-asset" data-asset-id="{{_id}}">Remove</button>
      {{else}}
        <span class="asset-title" data-asset-id="{{_id}}">{{name}}</span>
      {{/if}}
    </th>
  {{/each}}
          
</template>


<template name="assetbookings">

  {{#each timePeriods}}
    {{setScope 'period' }}
    <tr>
      <th>
        {{label}}
      </th>
      {{#each assets}}
        {{setScope 'asset' }}
        {{#with bookingStarts _id ../date}}
        
          <td title="{{get 'asset' 'name'}} booked at {{get 'period' 'label'}}" class="booking-period booked" 
              data-period="{{get 'period' 'label'}}" data-asset-name="{{get 'asset' 'name'}}" data-asset-id="{{get 'asset' '_id'}}"
              rowspan="{{numberOfPeriods}}">
              Booked
          </td>
        {{/with}}
        
        {{#if noBooking _id ../date}}
          
          <td title="Book {{get 'asset' 'name'}} at {{get 'period' 'label'}}" class="booking-period free" 
              data-period="{{get 'period' 'label'}}" data-asset-name="{{get 'asset' 'name'}}" data-asset-id="{{get 'asset' '_id'}}">
              &nbsp;
          </td>
          
        {{/if}}
        
      {{/each}}
    </tr>
  {{/each}}
            
</template>



<template name="assetbookingmodal">

  <div class="modal hide" id="asset-booking-modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">Make a booking</h4>
        </div>
        
        <div class="modal-body">

          <form class="form-horizontal">
            <div class="control-group">
              <label class="control-label" for="assetName">Booking</label>
              <div class="controls">
                <input type="text" class="asset-name" id="assetName" disabled="disabled">
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="fromTime">From</label>
              <div class="controls">
                <input type="text" class="from" id="fromTime" placeholder="From time">
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="toTime">To</label>
              <div class="controls">
                <input type="text" class="to" id="toTime" placeholder="To time">
              </div>
            </div>
            <input type="hidden" class="asset-id" id="assetId">
          </form>

        </div>
        
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">Make booking</button>
        </div>
      </div>
    </div>
  </div>

</template>